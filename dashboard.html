<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>znhen shop - Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0b0f1a; --card:#11172a; --accent:#ff7a00;
  --text:#e6e9f0; --muted:#9aa4bf; --green:#22c55e;
}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;background:radial-gradient(1200px 600px at 50% -10%, #1a2140,var(--bg));color:var(--text);}
a{color:inherit;text-decoration:none;}
.container{max-width:1100px;margin:auto;padding:16px;}
.nav{position:sticky;top:0;z-index:10;backdrop-filter: blur(8px);background:rgba(11,15,26,.6);border-bottom:1px solid #1f2646;}
.nav .row{display:flex;gap:14px;align-items:center;justify-content:space-between;}
.brand{font-weight:900;letter-spacing:.5px;}
.menu a{padding:10px 12px;border-radius:10px;}
.menu a:hover{background:#1a2140;}
.section{margin:18px 0;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;}
.card{background:linear-gradient(180deg,#121a33,#0f1530);border:1px solid #1f2646;border-radius:18px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);}
.card img{width:100%;height:130px;object-fit:cover;border-radius:12px;border:1px solid #1f2646;}
.card h3{margin:10px 0 4px;}
.price{color:#ffd166;font-weight:900;}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:10px 14px;border-radius:999px;border:1px solid #2a356b;background:linear-gradient(135deg,#ff7a00,#ff9f1c);color:#000;font-weight:900;margin-top:8px;cursor:pointer;}
.point{font-weight:900;}
.history{background:#1a2140;padding:8px;border-radius:12px;margin-top:6px;font-size:14px;}
</style>
</head>
<body>

<!-- NAV -->
<div class="nav">
  <div class="container row">
    <div class="brand">üõí znhen shop</div>
    <div class="menu">
      <a href="#products">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a>
      <a href="#topup">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</a>
      <a href="#profile">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
      <a href="#contact">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
  </div>
</div>

<div class="container">

  <!-- PRODUCTS -->
  <section id="products" class="section">
    <h2>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    <div class="grid" id="productGrid"></div>
  </section>

  <!-- TOPUP -->
  <section id="topup" class="section">
    <h2>‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô (TrueMoney)</h2>
    <div>
      <input id="amt" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
      <button class="btn" onclick="topup()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</button>
    </div>
    <p>‡∏û‡∏≠‡∏¢‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="pt">0</span></p>
    <div id="history"></div>
  </section>

  <!-- PROFILE -->
  <section id="profile" class="section">
    <h2>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
    <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: <span id="username"></span></p>
    <p>‡∏û‡∏≠‡∏¢‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="ptProfile">0</span></p>
    <div id="historyProfile"></div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section">
    <h2>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h2>
    <p>LINE: <a href="https://line.me/R/ti/p/@znhenshop" target="_blank">@znhenshop</a></p>
  </section>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBX7r3EhD8uj7hH34rGcrydhLy2NZmllGM",
  authDomain: "znhen-shop-a082a.firebaseapp.com",
  projectId: "znhen-shop-a082a",
  storageBucket: "znhen-shop-a082a.appspot.com",
  messagingSenderId: "400295230596",
  appId: "1:400295230596:web:03eafc19db0dfb8e9696d1"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö login
auth.onAuthStateChanged(user=>{
  if(!user) window.location='index.html';
  else document.getElementById('username').innerText = user.email;
});

// Products demo
const products = [
  {name:'‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A',price:199,img:'https://picsum.photos/400/240?1'},
  {name:'‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ B',price:299,img:'https://picsum.photos/400/240?2'},
  {name:'‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ C',price:399,img:'https://picsum.photos/400/240?3'}
];
const productGrid = document.getElementById('productGrid');
products.forEach(p=>{
  const div=document.createElement('div');
  div.className='card';
  div.innerHTML=`<img src="${p.img}"><h3>${p.name}</h3><div class="price">${p.price} ‡∏û‡∏≠‡∏¢‡∏ï‡πå</div><button class="btn" onclick="buy(${p.price},'${p.name}')">‡∏ã‡∏∑‡πâ‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏≠‡∏¢‡∏ï‡πå</button>`;
  productGrid.appendChild(div);
});

// Points & History
function getPoint(){return Number(localStorage.getItem('point')||0);}
function setPoint(v){
  localStorage.setItem('point',v);
  document.getElementById('pt').innerText=v;
  document.getElementById('ptProfile').innerText=v;
  updateHistory('Point updated: '+v);
}
function updateHistory(msg){
  let h = JSON.parse(localStorage.getItem('history')||'[]');
  h.push(msg);
  localStorage.setItem('history',JSON.stringify(h));
  document.getElementById('history').innerHTML=h.map(m=>`<div class="history">${m}</div>`).join('');
  document.getElementById('historyProfile').innerHTML=document.getElementById('history').innerHTML;
}

// Initialize
document.getElementById('pt').innerText = getPoint();
document.getElementById('ptProfile').innerText = getPoint();
updateHistory('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö');

// Topup
function topup(){
  const v=Number(document.getElementById('amt').value);
  if(!v||v<=0){alert('‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô');return;}
  setPoint(getPoint()+v);
  alert('‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ');
  document.getElementById('amt').value='';
}

// Buy
function buy(cost,name){
  if(getPoint()<cost){alert('‡∏û‡∏≠‡∏¢‡∏ï‡πå‡πÑ‡∏°‡πà‡∏û‡∏≠');return;}
  setPoint(getPoint()-cost);
  alert('‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ '+name+' ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ');
}

// Logout
function logout(){auth.signOut().then(()=>window.location='index.html');}
</script>

</body>
</html>
